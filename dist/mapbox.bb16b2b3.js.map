{"version":3,"sources":["scripts/mapbox.js"],"names":["_map","_centerLat","_centerLng","_dataFile","require","_accessToken","_mapStyle","mapboxgl","accessToken","Map","container","style","center","zoom","init","addSource","type","data","addLayer","id","source","paint","popup","on","e","features","queryRenderedFeatures","point","layers","length","feature","Popup","setLngLat","unproject","setHTML","properties","image","AdjustedSa","Address","PropType","addTo","getCanvas","cursor","remove","once","addControl","NavigationControl"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,IAAIA,IAAI,GAAG,IAAX;AACA,IAAMC,UAAU,GAAG,EAAnB;AACA,IAAMC,UAAU,GAAG,KAAnB;;AACA,IAAMC,SAAS,GAAGC,OAAO,CAAC,6BAAD,CAAzB;;AACA,IAAMC,YAAY,GAChB,8FADF;AAEA,IAAMC,SAAS,GAAG,kCAAlB;AAEAC,QAAQ,CAACC,WAAT,GAAuBH,YAAvB;AACAL,IAAI,GAAG,IAAIO,QAAQ,CAACE,GAAb,CAAiB;AACtBC,EAAAA,SAAS,EAAE,KADW;AAEtBC,EAAAA,KAAK,EAAEL,SAFe;AAGtBM,EAAAA,MAAM,EAAE,CAACV,UAAD,EAAaD,UAAb,CAHc;AAItBY,EAAAA,IAAI,EAAE;AAJgB,CAAjB,CAAP;;AAOA,SAASC,IAAT,GAAgB;AACdd,EAAAA,IAAI,CAACe,SAAL,CAAe,gBAAf,EAAiC;AAC/BC,IAAAA,IAAI,EAAE,SADyB;AAE/BC,IAAAA,IAAI,EAAEd;AAFyB,GAAjC;;AAKAH,EAAAA,IAAI,CAACkB,QAAL,CAAc;AACZC,IAAAA,EAAE,EAAE,SADQ;AAEZH,IAAAA,IAAI,EAAE,QAFM;AAGZI,IAAAA,MAAM,EAAE,gBAHI;AAIZC,IAAAA,KAAK,EAAE;AACL,sBAAgB,QADX;AAEL,uBAAiB,CAFZ;AAGL,6BAAuB;AAHlB;AAJK,GAAd;;AAWA,MAAIC,KAAK,GAAG,IAAZ;;AAEAtB,EAAAA,IAAI,CAACuB,EAAL,CAAQ,YAAR,EAAsB,SAAtB,EAAiC,UAASC,CAAT,EAAY;AAC3C,QAAMC,QAAQ,GAAGzB,IAAI,CAAC0B,qBAAL,CAA2BF,CAAC,CAACG,KAA7B,EAAoC;AACnDC,MAAAA,MAAM,EAAE,CAAC,SAAD;AAD2C,KAApC,CAAjB;;AAGA,QAAI,CAACH,QAAQ,CAACI,MAAd,EAAsB;AACpB;AACD;;AACD,QAAMC,OAAO,GAAGL,QAAQ,CAAC,CAAD,CAAxB;AACAH,IAAAA,KAAK,GAAG,IAAIf,QAAQ,CAACwB,KAAb,GACLC,SADK,CACKhC,IAAI,CAACiC,SAAL,CAAeT,CAAC,CAACG,KAAjB,CADL,EAELO,OAFK,CAGJ,SACE,YADF,GAEEJ,OAAO,CAACK,UAAR,CAAmBC,KAFrB,GAGE,IAHF,GAIE,qBAJF,GAKEN,OAAO,CAACK,UAAR,CAAmBE,UALrB,GAME,WANF,GAOE,kBAPF,GAQEP,OAAO,CAACK,UAAR,CAAmBG,OARrB,GASE,WATF,GAUE,wBAVF,GAWER,OAAO,CAACK,UAAR,CAAmBI,QAXrB,GAYE,WAZF,GAaE,OAhBE,EAkBLC,KAlBK,CAkBCxC,IAlBD,CAAR;AAmBD,GA3BD;;AA6BAA,EAAAA,IAAI,CAACuB,EAAL,CAAQ,YAAR,EAAsB,SAAtB,EAAiC,YAAW;AAC1CvB,IAAAA,IAAI,CAACyC,SAAL,GAAiB9B,KAAjB,CAAuB+B,MAAvB,GAAgC,EAAhC;AACApB,IAAAA,KAAK,CAACqB,MAAN;AACD,GAHD;AAID,EAED;;;AAEA3C,IAAI,CAAC4C,IAAL,CAAU,YAAV,EAAwB,UAASpB,CAAT,EAAY;AAClCV,EAAAA,IAAI;;AACJd,EAAAA,IAAI,CAAC6C,UAAL,CAAgB,IAAItC,QAAQ,CAACuC,iBAAb,EAAhB;AACD,CAHD","file":"mapbox.bb16b2b3.js","sourceRoot":"../src","sourcesContent":["let _map = null\nconst _centerLat = 40\nconst _centerLng = 116.5\nconst _dataFile = require('/data/detector_dots.geojson')\nconst _accessToken =\n  'pk.eyJ1IjoieGlhb2xlaWFvIiwiYSI6ImNqdzc4YTltNzJic3c0OHFxeWhlZDVodGkifQ.fq-KOXgjoJwsGRBsfqmy6w'\nconst _mapStyle = 'mapbox://styles/mapbox/light-v10'\n\nmapboxgl.accessToken = _accessToken\n_map = new mapboxgl.Map({\n  container: 'map',\n  style: _mapStyle,\n  center: [_centerLng, _centerLat],\n  zoom: 7.9\n})\n\nfunction init() {\n  _map.addSource('markers-source', {\n    type: 'geojson',\n    data: _dataFile\n  })\n\n  _map.addLayer({\n    id: 'markers',\n    type: 'circle',\n    source: 'markers-source',\n    paint: {\n      'circle-color': 'orange',\n      'circle-radius': 4,\n      'circle-stroke-width': 0\n    }\n  })\n\n  let popup = null\n\n  _map.on('mouseenter', 'markers', function(e) {\n    const features = _map.queryRenderedFeatures(e.point, {\n      layers: ['markers']\n    })\n    if (!features.length) {\n      return\n    }\n    const feature = features[0]\n    popup = new mapboxgl.Popup()\n      .setLngLat(_map.unproject(e.point))\n      .setHTML(\n        '<ul>' +\n          '<img src=\"' +\n          feature.properties.image +\n          '\">' +\n          '<li>Sale price: <b>' +\n          feature.properties.AdjustedSa +\n          '</b></li>' +\n          '<li>Address: <b>' +\n          feature.properties.Address +\n          '</b></li>' +\n          '<li>Property type: <b>' +\n          feature.properties.PropType +\n          '</b></li>' +\n          '</ul>'\n      )\n      .addTo(_map)\n  })\n\n  _map.on('mouseleave', 'markers', function() {\n    _map.getCanvas().style.cursor = ''\n    popup.remove()\n  })\n}\n\n// \"<h3>HOME SALES INFORMATION</h3>\" +\n\n_map.once('style.load', function(e) {\n  init()\n  _map.addControl(new mapboxgl.NavigationControl())\n})\n"]}